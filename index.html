<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Hela Code - Where your ideas talk back.</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css?family=Segoe+UI:400,700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <style>
    /* ... existing styles ... */
    
    /* Add name field to create account form */
    #createAccountForm {
      display: none;
    }
  </style>
</head>
<body>
  <!-- Homepage -->
  <div id="homepage" style="display:block;">
 <section class="nf-hero">
      <div class="nf-hero-title">Hela Code</div>
      <div class="nf-hero-tagline">Where your ideas talk back.</div>
      <button class="nf-start-btn" onclick="showLogin()">Start Chat</button>
      <div class="nf-features">
        <div class="nf-feature-card">
          <div class="nf-feature-icon">ü§ñ</div>
          <div class="nf-feature-title">Smart AI</div>
          <div class="nf-feature-desc">Get instant, context-aware answers and code from a powerful AI trained for developers.</div>
        </div>
        <div class="nf-feature-card">
          <div class="nf-feature-icon">üîí</div>
          <div class="nf-feature-title">Privacy First</div>
          <div class="nf-feature-desc">Your conversations are private and encrypted. We never share your data.</div>
        </div>
        <div class="nf-feature-card">
          <div class="nf-feature-icon">‚ö°</div>
          <div class="nf-feature-title">Real-time Chat</div>
          <div class="nf-feature-desc">Enjoy a seamless, live chat experience with smooth animations and instant feedback.</div>
        </div>
      </div>
      <footer class="nf-footer">
        <div class="nf-socials">
          <a href="https://twitter.com/" target="_blank" aria-label="Twitter"><span>üê¶</span></a>
          <a href="https://github.com/" target="_blank" aria-label="GitHub"><span>üíª</span></a>
          <a href="mailto:info@pixstudios.com" aria-label="Email"><span>‚úâÔ∏è</span></a>
        </div>
        ¬© 2025 PIX Studios
      </footer>
    </section>
  </div>
  
  <!-- Login Page -->
  <div id="loginpage" style="display:none;">
    <div class="nf-login-bg">
      <form class="nf-login-box" id="loginForm" autocomplete="on" onsubmit="return false;">
        <form class="nf-login-box" id="loginForm" autocomplete="on" onsubmit="return false;">
        <div class="nf-login-title">Sign in to NeuraFlow</div>
        <div class="nf-login-error" id="loginError"></div>
        <div class="nf-login-form">
          <label for="email">Email</label>
          <input type="email" id="email" required autocomplete="email" spellcheck="false">
          <label for="password">Password</label>
          <input type="password" id="password" required autocomplete="current-password">
          <div class="nf-remember">
            <input type="checkbox" id="rememberMe">
            <label for="rememberMe" style="margin:0;">Remember me</label>
          </div>
          <button class="nf-login-btn" id="loginBtn" type="submit">Login</button>
          <button type="button" id="googleLoginBtn" class="nf-google-btn">
            <span class="nf-google-icon"></span> Sign in with Google
          </button>
      </form>
      
      <!-- Updated Create Account Modal with name field -->
      <form class="nf-login-box" id="createAccountForm" style="display:none;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:20;">
        <div class="nf-login-title">Create Account</div>
        <div class="nf-login-error" id="createError"></div>
        <div class="nf-login-form">
          <label for="displayName">Full Name</label>
          <input type="text" id="displayName" required autocomplete="name" spellcheck="false">
          <label for="newEmail">Email</label>
          <input type="email" id="newEmail" required autocomplete="email" spellcheck="false">
          <label for="newPassword">Password</label>
          <input type="password" id="newPassword" required autocomplete="new-password">
          <button class="nf-login-btn" id="createBtn" type="submit">Create Account</button>
        </div>
        <div class="nf-login-links" style="justify-content:center;">
          <a href="#" onclick="hideCreateAccount();return false;">Back to Login</a>
        </div>
      </form>
    </div>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script>
    // ... existing showLogin, showCreateAccount, hideCreateAccount functions ...
    
    // Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyAkZ1COLT59ukLGzpv5lW3UZ8vQ9tEN1gw",
      authDomain: "hela-code.firebaseapp.com",
      projectId: "hela-code",
      appId: "1:813299203715:web:910e7227cdd4a09ad1a5b6"
    };
    firebase.initializeApp(firebaseConfig);

    // Save user info to localStorage and redirect
    function saveUserAndRedirect(user) {
      const userData = {
        uid: user.uid,
        email: user.email,
        name: user.displayName || user.email.split('@')[0] // Use displayName or extract from email
      };
      
      localStorage.setItem('helaUser', JSON.stringify(userData));
      window.location.href = "/chat.html";
    }

    // Updated login logic
    document.getElementById('loginForm').addEventListener('submit', async function(e) {
      e.preventDefault();
      const email = document.getElementById('email').value.trim();
      const password = document.getElementById('password').value;
      const rememberMe = document.getElementById('rememberMe').checked;
      const errorDiv = document.getElementById('loginError');
      errorDiv.style.display = 'none';
      document.getElementById('loginBtn').disabled = true;

      try {
        await firebase.auth().setPersistence(
          rememberMe ? firebase.auth.Auth.Persistence.LOCAL : firebase.auth.Auth.Persistence.SESSION
        );
        const userCredential = await firebase.auth().signInWithEmailAndPassword(email, password);
        saveUserAndRedirect(userCredential.user);
      } catch (err) {
        errorDiv.textContent = err.message.replace("Firebase:", "");
        errorDiv.style.display = 'block';
        document.getElementById('loginBtn').disabled = false;
      }
    });

    // Updated create account logic
    document.getElementById('createAccountForm').addEventListener('submit', async function(e) {
      e.preventDefault();
      const name = document.getElementById('displayName').value.trim();
      const email = document.getElementById('newEmail').value.trim();
      const password = document.getElementById('newPassword').value;
      const errorDiv = document.getElementById('createError');
      errorDiv.style.display = 'none';
      document.getElementById('createBtn').disabled = true;

      try {
        const userCredential = await firebase.auth().createUserWithEmailAndPassword(email, password);
        
        // Update profile with display name
        await userCredential.user.updateProfile({
          displayName: name
        });
        
        saveUserAndRedirect(userCredential.user);
      } catch (err) {
        errorDiv.textContent = err.message.replace("Firebase:", "");
        errorDiv.style.display = 'block';
        document.getElementById('createBtn').disabled = false;
      }
    });

    // Updated Google login logic
    document.getElementById('googleLoginBtn').addEventListener('click', async function() {
      const provider = new firebase.auth.GoogleAuthProvider();
      try {
        const userCredential = await firebase.auth().signInWithPopup(provider);
        saveUserAndRedirect(userCredential.user);
      } catch (err) {
        const errorDiv = document.getElementById('loginError');
        errorDiv.textContent = err.message.replace("Firebase:", "");
        errorDiv.style.display = 'block';
      }
    });
  </script>
</body>
</html>

